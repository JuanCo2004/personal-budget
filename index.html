<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        let totalIngresos = 0;
        let totalEgresos = 0;
        let contador = 0;
        let movimientos = [];
        let continuar = "si";

        console.log("Registro de Gastos");
        console.log("-----------------------");

        while (continuar.toLowerCase() === 'si') {
            registrarMovimiento();
            continuar = prompt("¿Registrar otro movimiento? (si/no):");
            console.log(`¿Registrar otro movimiento? (si/no): ${continuar}`);
            console.log("");
        }

        calcularTotalSaldo();
        mostrarResumen();

        //Funciones imperativas:
        function registrarMovimiento(){
            let nombre_gasto = '';  
            let tipo = '';
            let monto_gastado = 0;
            //Validar nombre de gasto:
            while (true) {
                nombre_gasto = prompt("Ingrese el nombre del gasto: ");
                if (nombre_gasto && nombre_gasto.trim() !== '') {
                    break;
                } else {
                    alert("Error: El nombre no puede estar vacío.");
                }
            }
            //Validar tipo:
            while (true) {
                tipo = prompt("Ingrese el tipo (Ingreso / Egreso): ");
                if (tipo) {
                    tipo = tipo.trim().toLowerCase();
                    if (tipo === 'ingreso' || tipo === 'egreso') {
                        break;
                    }
                }
                alert("Error: El tipo debe ser 'Ingreso' o 'Egreso'.");
            }
            //Validar monto:
            while (true) {
                let input = prompt("Ingrese el monto:");
                monto_gastado = parseFloat(input);
                if (!isNaN(monto_gastado) && monto_gastado > 0) {
                    break;
                } else {
                    alert("Error: El monto debe ser un número mayor a 0.");
                }
            }
            //Guardar movimiento en el array:
            movimientos.push({nombre_gasto, tipo, monto_gastado});

            // Mostrar movimiento en consola
            console.log("Nombre del movimiento:", nombre_gasto);
            console.log("Tipo:", tipo.charAt(0).toUpperCase() + tipo.slice(1));
            console.log("Monto:", monto_gastado.toFixed(2));
            console.log("");
        }
        function calcularTotalSaldo() {
            totalIngresos = 0;
            totalEgresos = 0;

            for (let i = 0; i < movimientos.length; i++) {
                if (movimientos[i].tipo === 'ingreso') {
                totalIngresos += movimientos[i].monto_gastado;
                } else {
                totalEgresos += movimientos[i].monto_gastado;
                }
            }
        }
        function mostrarResumen() {
            let saldo = totalIngresos - totalEgresos;

            console.log("Resumen Final");
            console.log("-----------------------");
            console.log("Total de movimientos registrados:", movimientos.length);
            console.log("Saldo total: $" + saldo.toFixed(2));
            console.log("");
            console.log("Desglose por tipo:");
            console.log("- Egresos: $" + totalEgresos.toFixed(2));
            console.log("- Ingresos: $" + totalIngresos.toFixed(2));
        }
    </script>
</body>
</html>